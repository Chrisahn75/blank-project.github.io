<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script>
      /**
       * @param data String the input String to cipher
       * @param offset Number (Integer) the offset to use for Cesar Cipher Algorithm.
       * @return the Ciphered version of data.
       */
      function chiffrer(data, offset) {
        var alphabet = 'abcdefghijklmnopqrstuvwxyz';
        var result = "";
        for (var i = 0; i < data.length; i++) {
          var character = data[i].toLowerCase();
          var index = alphabet.indexOf(character);

          if (index !== -1) {
            // Actual Cesar Cipher
            index += offset;

            var length = alphabet.length;

            // Computes the right index in bounds (0, 25)
            index = ((index % length) + length) % length;

            // Get the Ciphered character
            character = alphabet[index];
          }

          result += character;
        }
        return result;
      }

      function dechiffrer(data, offset) {
        return chiffrer(data, -offset);
      }
    </script>
    <script>
      // TESTS SUITE
      function testChiffrer(chiffrer) {
        // test une lettre basique décalage positif
        if (chiffrer("a", 1) === "b") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("a", 1) devrait être "b"', 'mais est', chiffrer("a", 1));

        // test plusieurs lettres décalage positif
        if (chiffrer("ab", 3) === "de") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("ab", 3) devrait être "de"', 'mais est', chiffrer("ab", 3));

        // test de plusieurs mots avec décalage positif
        if (chiffrer("bonjour je", 6) === "hutpuax pk") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("bonjour je", 6) devrait être "hutpuax pk"', 'mais est', chiffrer("bonjour je", 6));

        // test de ponctuation, symboles, majuscules avec décalage positif
        if (chiffrer("Bonjour, je m'appelle Test. Je suis ici pour t'aider ! :@", 17) === "sfeafli, av d'rggvccv kvjk. av jlzj ztz gfli k'rzuvi ! :@") console.log('ok');
        else console.log('error', "Le résultat de chiffrer('Bonjour, je m'appelle Test. Je suis ici pour t'aider ! :@', 17) devrait être 'sfeafli, av d'rggvccv kvjk. av jlzj ztz gfli k'rzuvi ! :@'", "mais est", chiffrer("Bonjour, je m'appelle Test. Je suis ici pour t'aider ! :@", 17));

        // test décalage négatif
        if (chiffrer("bonjour", -6) === "vihdiol") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("bonjour", -6) devrait être "vihdiol"', "mais est", chiffrer('bonjour', -6));

        // test décalage positif plus grand que l'alphabet
        if (chiffrer("bonjour", 115123) === "wjiejpm") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("bonjour", 115123) devrait être "wjiejpm"', "mais est", chiffrer("bonjour", 115123));

        // test décalage négatif plus grand que l'alphabet
        if (chiffrer("bonjour", -45523) === "erqmrxu") console.log('ok');
        else console.log('error', 'Le résultat de chiffrer("bonjour", -45523) devrait être "erqmrxu"', "mais est", chiffrer("bonjour", -45523));
      }

      function testDechiffrer(dechiffrer) {
        // test une lettre basique décalage positif
        if (dechiffrer("b", 1) === "a") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("b", 1) devrait être "a"', "mais est", dechiffrer("b", 1));

        // test plusieurs lettres décalage positif
        if (dechiffrer("de", 3) === "ab") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("ab", 3) devrait être "ab"', "mais est", dechiffrer("de", 3));

        // test de plusieurs mots avec décalage positif
        if (dechiffrer("hutpuax pk", 6) === "bonjour je") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("hutpuax pk", 6) devrait être "bonjour je"', "mais est", dechiffrer("hutpuax pk", 6));

        // test de ponctuation, symboles, majuscules avec décalage positif
        if (dechiffrer("sfeafli, av d'rggvccv kvjk. av jlzj ztz gfli k'rzuvi ! :@", 17) === "bonjour, je m'appelle test. je suis ici pour t'aider ! :@") console.log('ok');
        else console.log('error', "Le résultat de dechiffrer('sfeafli, av d'rggvccv kvjk. av jlzj ztz gfli k'rzuvi ! :@', 17) devrait être 'bonjour, je m'appelle test. je suis ici pour t'aider ! :@'", "mais est", dechiffrer("sfeafli, av d'rggvccv kvjk. av jlzj ztz gfli k'rzuvi ! :@", 17));

        // test décalage négatif
        if (dechiffrer("vihdiol", -6) === "bonjour") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("vihdiol", -6) devrait être "bonjour"', "mais est", dechiffrer("vihdiol", -6));

        // test décalage positif plus grand que l'alphabet
        if (dechiffrer("wjiejpm", 115123) === "bonjour") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("wjiejpm", 115123) devrait être "bonjour"', "mais est", dechiffrer("wjiejpm", 115123));

        // test décalage négatif plus grand que l'alphabet
        if (dechiffrer("erqmrxu", -45523) === "bonjour") console.log('ok');
        else console.log('error', 'Le résultat de dechiffrer("erqmrxu", -45523) devrait être "bonjour"', "mais est", dechiffrer("erqmrxu", -45523));
      }
    </script>
    <script>
    // RUN TESTS
    console.log('Run chiffrer tests');
    testChiffrer(chiffrer);
    console.log('Run dechiffrer tests');
    testDechiffrer(dechiffrer);
    </script>
  </head>
  <body>

  </body>
</html>
